import{_ as ae,c as n,o as d,a as e,d as p,t as i,F as w,p as k,m as V,n as se,e as f,A as O,E as ne,w as D,v as C,B as de,x as ie,r as m,j as re,k as ce,G as me,l as v}from"./index-Bx6NDShD.js";const ue={name:"CloudImages",setup(){const r=ie(),o=m([]),A=m([]),t=m(!1),F=m(!1),L=m(!1),l=m(null),g=m(!1),I=m(null),b=m([]),M=m(!1),U=m({}),T=m(!1),q=m(!1);let h=null;const S=m({name:"",filename:"",download_url:"",os_type:"",version:"",architecture:"amd64",checksum:""}),x=m({selectedNodeId:"",selectedImageIds:[]}),N=m([{name:"Ubuntu 24.04 LTS (Noble)",filename:"noble-server-cloudimg-amd64.img",os_type:"ubuntu",version:"24.04",architecture:"amd64",download_url:"https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img",icon:"ðŸŸ "},{name:"Ubuntu 22.04 LTS (Jammy)",filename:"jammy-server-cloudimg-amd64.img",os_type:"ubuntu",version:"22.04",architecture:"amd64",download_url:"https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img",icon:"ðŸŸ "},{name:"Ubuntu 20.04 LTS (Focal)",filename:"focal-server-cloudimg-amd64.img",os_type:"ubuntu",version:"20.04",architecture:"amd64",download_url:"https://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64.img",icon:"ðŸŸ "},{name:"Debian 12 (Bookworm)",filename:"debian-12-generic-amd64.qcow2",os_type:"debian",version:"12",architecture:"amd64",download_url:"https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-generic-amd64.qcow2",icon:"ðŸ”´"},{name:"Debian 11 (Bullseye)",filename:"debian-11-generic-amd64.qcow2",os_type:"debian",version:"11",architecture:"amd64",download_url:"https://cloud.debian.org/images/cloud/bullseye/latest/debian-11-generic-amd64.qcow2",icon:"ðŸ”´"},{name:"Rocky Linux 9",filename:"Rocky-9-GenericCloud-Base.latest.x86_64.qcow2",os_type:"rocky",version:"9",architecture:"amd64",download_url:"https://download.rockylinux.org/pub/rocky/9/images/x86_64/Rocky-9-GenericCloud-Base.latest.x86_64.qcow2",icon:"ðŸŸ¢"},{name:"Rocky Linux 8",filename:"Rocky-8-GenericCloud-Base.latest.x86_64.qcow2",os_type:"rocky",version:"8",architecture:"amd64",download_url:"https://download.rockylinux.org/pub/rocky/8/images/x86_64/Rocky-8-GenericCloud-Base.latest.x86_64.qcow2",icon:"ðŸŸ¢"},{name:"AlmaLinux 9",filename:"AlmaLinux-9-GenericCloud-latest.x86_64.qcow2",os_type:"alma",version:"9",architecture:"amd64",download_url:"https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-latest.x86_64.qcow2",icon:"ðŸ”µ"},{name:"AlmaLinux 8",filename:"AlmaLinux-8-GenericCloud-latest.x86_64.qcow2",os_type:"alma",version:"8",architecture:"amd64",download_url:"https://repo.almalinux.org/almalinux/8/cloud/x86_64/images/AlmaLinux-8-GenericCloud-latest.x86_64.qcow2",icon:"ðŸ”µ"},{name:"Fedora Cloud 41",filename:"Fedora-Cloud-Base-41.qcow2",os_type:"fedora",version:"41",architecture:"amd64",download_url:"https://download.fedoraproject.org/pub/fedora/linux/releases/41/Cloud/x86_64/images/Fedora-Cloud-Base-Generic-41-1.4.x86_64.qcow2",icon:"ðŸ”·"},{name:"Fedora Cloud 40",filename:"Fedora-Cloud-Base-40.qcow2",os_type:"fedora",version:"40",architecture:"amd64",download_url:"https://download.fedoraproject.org/pub/fedora/linux/releases/40/Cloud/x86_64/images/Fedora-Cloud-Base-Generic.x86_64-40-1.14.qcow2",icon:"ðŸ”·"},{name:"CentOS Stream 9",filename:"CentOS-Stream-GenericCloud-9.qcow2",os_type:"centos",version:"9",architecture:"amd64",download_url:"https://cloud.centos.org/centos/9-stream/x86_64/images/CentOS-Stream-GenericCloud-9-latest.x86_64.qcow2",icon:"ðŸŸ£"},{name:"openSUSE Leap 15.6",filename:"openSUSE-Leap-15.6-Minimal-VM.qcow2",os_type:"opensuse",version:"15.6",architecture:"amd64",download_url:"https://download.opensuse.org/distribution/leap/15.6/appliances/openSUSE-Leap-15.6-Minimal-VM.x86_64-Cloud.qcow2",icon:"ðŸŸ¢"},{name:"Arch Linux",filename:"Arch-Linux-x86_64-cloudimg.qcow2",os_type:"other",version:"latest",architecture:"amd64",download_url:"https://geo.mirror.pkgbuild.com/images/latest/Arch-Linux-x86_64-cloudimg.qcow2",icon:"ðŸ”µ"},{name:"Oracle Linux 9",filename:"OL9U5_x86_64-kvm-b272.qcow2",os_type:"other",version:"9",architecture:"amd64",download_url:"https://yum.oracle.com/templates/OracleLinux/OL9/u5/x86_64/OL9U5_x86_64-kvm-b272.qcow2",icon:"ðŸ”´"},{name:"Oracle Linux 8",filename:"OL8U10_x86_64-kvm-b253.qcow2",os_type:"other",version:"8",architecture:"amd64",download_url:"https://yum.oracle.com/templates/OracleLinux/OL8/u10/x86_64/OL8U10_x86_64-kvm-b253.qcow2",icon:"ðŸ”´"},{name:"Alpine Linux 3.21",filename:"alpine-virt-3.21.0-x86_64.qcow2",os_type:"other",version:"3.21",architecture:"amd64",download_url:"https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/cloud/nocloud_alpine-3.21.0-x86_64-bios-cloudinit-r0.qcow2",icon:"â›°ï¸"},{name:"Kali Linux 2024.4",filename:"kali-linux-2024.4-cloud.tar.xz",os_type:"other",version:"2024.4",architecture:"amd64",download_url:"https://kali.download/cloud-images/kali-2024.4/kali-linux-2024.4-cloud-genericcloud-amd64.tar.xz",icon:"ðŸ‰"},{name:"FreeBSD 14.1",filename:"FreeBSD-14.1-RELEASE-amd64-ufs.qcow2.xz",os_type:"other",version:"14.1",architecture:"amd64",download_url:"https://download.freebsd.org/releases/VM-IMAGES/14.1-RELEASE/amd64/Latest/FreeBSD-14.1-RELEASE-amd64-BASIC-CLOUDINIT-ufs.qcow2.xz",icon:"ðŸ˜ˆ"},{name:"Gentoo Linux",filename:"gentoo-amd64-cloud-systemd.qcow2",os_type:"other",version:"latest",architecture:"amd64",download_url:"https://distfiles.gentoo.org/releases/amd64/autobuilds/current-cloud-amd64-openstack/cloud-amd64-openstack-systemd.qcow2",icon:"ðŸ¦©"}]),G=a=>{const s=b.value.indexOf(a.name);s>-1?b.value.splice(s,1):b.value.push(a.name)},z=a=>b.value.includes(a),E=()=>N.value.filter(a=>b.value.includes(a.name)),P=re(()=>[...N.value].sort((a,s)=>a.name.localeCompare(s.name))),y=async()=>{t.value=!0;try{const a=await v.cloudImages.list();o.value=a.data}catch(a){console.error("Failed to fetch cloud images:",a)}finally{t.value=!1}},j=async a=>{try{await v.cloudImages.download(a),r.success("Cloud image download started"),R()}catch(s){console.error("Failed to start download:",s),r.error("Failed to start download")}},H=async()=>{g.value=!0;try{l.value?(await v.cloudImages.update(l.value.id,S.value),r.success("Cloud image updated successfully")):(await v.cloudImages.create(S.value),r.success("Cloud image added successfully")),B(),y()}catch(a){console.error("Failed to save cloud image:",a),r.error("Failed to save cloud image")}finally{g.value=!1}},K=async()=>{if(b.value.length===0){r.error("Please select at least one cloud image");return}g.value=!0;const a=E();let s=0,u=0;try{for(const c of a)try{await v.cloudImages.create({name:c.name,filename:c.filename,download_url:c.download_url,os_type:c.os_type,version:c.version,architecture:c.architecture,checksum:""}),s++}catch(_){console.error(`Failed to add ${c.name}:`,_),u++}s>0&&r.success(`Successfully added ${s} cloud image${s>1?"s":""}`),u>0&&r.warning(`Failed to add ${u} cloud image${u>1?"s":""} (may already exist)`),B(),y()}catch(c){console.error("Failed to save cloud images:",c),r.error("Failed to save cloud images")}finally{g.value=!1}},J=a=>{l.value=a,S.value={name:a.name,filename:a.filename,download_url:a.download_url,os_type:a.os_type,version:a.version||"",architecture:a.architecture,checksum:a.checksum||""},F.value=!0},Q=async a=>{if(confirm("Are you sure you want to delete this cloud image?"))try{await v.cloudImages.delete(a),r.success("Cloud image deleted successfully"),y()}catch(s){console.error("Failed to delete cloud image:",s),r.error("Failed to delete cloud image")}},B=()=>{F.value=!1,l.value=null,I.value=null,b.value=[],S.value={name:"",filename:"",download_url:"",os_type:"",version:"",architecture:"amd64",checksum:""}},W=a=>{if(!a)return"0 B";const s=["B","KB","MB","GB","TB"],u=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,u)*100)/100+" "+s[u]},X=a=>({ubuntu:"Ubuntu",debian:"Debian",centos:"CentOS",rocky:"Rocky Linux",alma:"AlmaLinux",fedora:"Fedora",opensuse:"openSUSE",other:"Other"})[a]||a,Y=async()=>{try{const a=await v.proxmox.listHosts(),s=[];for(const u of a.data)try{const c=await v.proxmox.listNodes(u.id);c.data&&c.data.length>0&&c.data.forEach(_=>{s.push({id:_.id,node_name:_.node_name,proxmox_host_name:u.name})})}catch(c){console.error(`Failed to fetch nodes for host ${u.name}:`,c)}A.value=s}catch(a){console.error("Failed to fetch nodes:",a),r.error("Failed to fetch Proxmox nodes")}},Z=async()=>{if(!x.value.selectedNodeId||x.value.selectedImageIds.length===0){r.error("Please select a node and at least one cloud image");return}M.value=!0;try{await v.cloudImages.setupTemplates({node_id:parseInt(x.value.selectedNodeId),cloud_image_ids:x.value.selectedImageIds}),r.success("Template setup started! This may take several minutes."),L.value=!1,x.value={selectedNodeId:"",selectedImageIds:[]}}catch(a){console.error("Failed to setup templates:",a),r.error("Failed to start template setup")}finally{M.value=!1}},$=async()=>{L.value=!0,await Y()},R=()=>{h||(h=setInterval(()=>{y(),!o.value.some(s=>s.download_status==="downloading")&&h&&(clearInterval(h),h=null)},2e3))},ee=async()=>{T.value=!0,U.value={};try{const a=await v.proxmox.listHosts(),s={};for(const u of a.data)try{const c=await v.proxmox.listNodes(u.id);if(c.data&&c.data.length>0)for(const _ of c.data){const le=await v.cloudImages.checkTemplates(_.id);s[_.id]=le.data}}catch(c){console.error(`Failed to check templates for host ${u.name}:`,c)}U.value=s,r.success("Template status checked successfully")}catch(a){console.error("Failed to check templates:",a),r.error("Failed to check template status")}finally{T.value=!1}},oe=a=>Object.values(a).filter(s=>s).length,te=async()=>{var a;q.value=!0;try{const s=await v.cloudImages.fetchLatest();s.data.updated_count>0?(((a=s.data.updated_images)==null?void 0:a.some(c=>c.status==="added"))?r.success(`Added ${s.data.updated_count} cloud image(s) to database`):r.success(`Updated ${s.data.updated_count} cloud image(s)`),await y()):r.info("All cloud images are up to date"),s.data.errors&&s.data.errors.length>0&&(console.error("Cloud image errors:",s.data.errors),r.warning(`Some images could not be updated: ${s.data.errors.length} errors`))}catch(s){console.error("Failed to fetch latest cloud images:",s),r.error("Failed to fetch latest cloud images")}finally{q.value=!1}};return ce(()=>{y(),o.value.some(s=>s.download_status==="downloading")&&R()}),me(()=>{h&&clearInterval(h)}),{images:o,nodes:A,loading:t,showAddModal:F,showSetupModal:L,editingImage:l,imageForm:S,setupForm:x,saving:g,imageSelectionMode:I,selectedImageNames:b,settingUpTemplates:M,templateStatus:U,checkingTemplates:T,fetchingLatest:q,predefinedImages:N,sortedPredefinedImages:P,fetchImages:y,downloadImage:j,saveImage:H,saveSelectedImages:K,editImage:J,deleteImage:Q,closeModal:B,setupTemplates:Z,openSetupModal:$,checkAllTemplates:ee,getTemplateCount:oe,fetchLatestImages:te,toggleImageSelection:G,isImageSelected:z,getSelectedImages:E,formatBytes:W,formatOSType:X}}},ge={class:"cloud-images-page"},pe={class:"card"},ve={class:"card-header"},fe={class:"flex gap-1"},be=["disabled"],he=["disabled"],ye={key:0,class:"template-status-section"},_e={class:"template-status-grid"},we={class:"node-status-header"},ke={class:"node-name"},xe={class:"template-count"},Ie={class:"template-list"},Se={class:"template-vmid"},Ce={key:1,class:"loading-spinner"},Fe={key:2,class:"text-center text-muted"},Le={key:3,class:"table-container"},Ae={class:"table"},Me={class:"badge badge-info"},Ue={key:0,class:"download-progress"},Te={class:"progress-bar-container"},qe={class:"text-xs text-muted"},Ne={key:1,class:"badge badge-success"},Be={key:2,class:"badge badge-danger"},Oe={key:3,class:"badge badge-secondary"},De={class:"flex gap-1"},Ee=["onClick"],Re={key:1,class:"btn btn-secondary btn-sm",disabled:""},Ve=["onClick"],Ge=["onClick"],ze={class:"modal-header"},Pe={class:"modal-body"},je={class:"form-group"},He=["value"],Ke={class:"form-group"},Je={class:"checkbox-list"},Qe=["value"],We={key:0,class:"alert alert-info"},Xe={class:"modal-footer"},Ye=["disabled"],Ze=["disabled"],$e={class:"modal-header"},eo={key:0,class:"modal-body selection-mode"},oo={class:"selection-options"},to={key:1,class:"modal-body"},lo={class:"mode-header"},ao={key:0,class:"selection-count"},so={class:"predefined-images-grid"},no=["onClick"],io={class:"predefined-image-icon"},ro={class:"predefined-image-info"},co={class:"predefined-image-name"},mo={class:"predefined-image-details"},uo={key:0,class:"predefined-image-check"},go={key:0,class:"selected-images-preview"},po={class:"selected-images-list"},vo={class:"modal-footer"},fo=["disabled"],bo={key:0,class:"mode-header"},ho={class:"form-group"},yo={class:"form-group"},_o={class:"form-group"},wo={class:"grid grid-cols-2 gap-2"},ko={class:"form-group"},xo={class:"form-group"},Io={class:"grid grid-cols-2 gap-2"},So={class:"form-group"},Co={class:"form-group"},Fo={class:"modal-footer"},Lo=["disabled"];function Ao(r,o,A,t,F,L){return d(),n("div",ge,[e("div",pe,[e("div",ve,[o[29]||(o[29]=e("h3",null,"Cloud Images",-1)),e("div",fe,[e("button",{onClick:o[0]||(o[0]=(...l)=>t.fetchLatestImages&&t.fetchLatestImages(...l)),class:"btn btn-outline",disabled:t.fetchingLatest},i(t.fetchingLatest?"ðŸ”„ Updating...":"â¬‡ï¸ Fetch Latest"),9,be),e("button",{onClick:o[1]||(o[1]=(...l)=>t.checkAllTemplates&&t.checkAllTemplates(...l)),class:"btn btn-outline",disabled:t.checkingTemplates},i(t.checkingTemplates?"ðŸ”„ Checking...":"ðŸ” Check Templates"),9,he),e("button",{onClick:o[2]||(o[2]=(...l)=>t.openSetupModal&&t.openSetupModal(...l)),class:"btn btn-outline"},"âš™ï¸ Setup Templates"),e("button",{onClick:o[3]||(o[3]=l=>t.showAddModal=!0),class:"btn btn-primary"},"+ Add Cloud Image")])]),t.templateStatus&&Object.keys(t.templateStatus).length>0?(d(),n("div",ye,[o[30]||(o[30]=e("h4",{class:"template-status-title"},"Template Status by Node",-1)),e("div",_e,[(d(!0),n(w,null,k(t.templateStatus,l=>(d(),n("div",{key:l.node_id,class:"node-status-card"},[e("div",we,[e("span",ke,i(l.node_name),1),e("span",xe,i(t.getTemplateCount(l.templates))+" templates",1)]),e("div",Ie,[(d(!0),n(w,null,k(l.templates,(g,I)=>(d(),n("div",{key:I,class:"template-item"},[e("span",Se,i(I),1),e("span",{class:V(["template-badge",g?"exists":"missing"])},i(g?"âœ“ Exists":"âœ— Missing"),3)]))),128))])]))),128))])])):p("",!0),t.loading?(d(),n("div",Ce)):t.images.length===0?(d(),n("div",Fe,[...o[31]||(o[31]=[e("p",null,"No cloud images configured yet.",-1),e("p",{class:"text-sm"},"Add cloud images for fast VM deployment.",-1)])])):(d(),n("div",Le,[e("table",Ae,[o[32]||(o[32]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"OS Type"),e("th",null,"Version"),e("th",null,"Architecture"),e("th",null,"Size"),e("th",null,"Download Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),n(w,null,k(t.images,l=>(d(),n("tr",{key:l.id},[e("td",null,i(l.name),1),e("td",null,[e("span",Me,i(t.formatOSType(l.os_type)),1)]),e("td",null,i(l.version||"N/A"),1),e("td",null,i(l.architecture),1),e("td",null,i(l.file_size?t.formatBytes(l.file_size):"Unknown"),1),e("td",null,[l.download_status==="downloading"?(d(),n("div",Ue,[e("div",Te,[e("div",{class:"progress-bar-fill",style:se({width:l.download_progress+"%"})},null,4)]),e("span",qe,i(l.download_progress)+"%",1)])):l.is_downloaded?(d(),n("span",Ne,"Downloaded")):l.download_status==="error"?(d(),n("span",Be,"Error")):(d(),n("span",Oe,"Not Downloaded"))]),e("td",null,[e("div",De,[!l.is_downloaded&&l.download_status!=="downloading"?(d(),n("button",{key:0,onClick:g=>t.downloadImage(l.id),class:"btn btn-primary btn-sm"}," Download ",8,Ee)):p("",!0),l.download_status==="downloading"?(d(),n("button",Re," Downloading... ")):p("",!0),e("button",{onClick:g=>t.editImage(l),class:"btn btn-outline btn-sm"},"Edit",8,Ve),e("button",{onClick:g=>t.deleteImage(l.id),class:"btn btn-danger btn-sm"},"Delete",8,Ge)])])]))),128))])])]))]),t.showSetupModal?(d(),n("div",{key:0,class:"modal",onClick:o[10]||(o[10]=l=>t.showSetupModal=!1)},[e("div",{class:"modal-content",onClick:o[9]||(o[9]=D(()=>{},["stop"]))},[e("div",ze,[o[33]||(o[33]=e("h3",null,"Setup Cloud Image Templates",-1)),e("button",{onClick:o[4]||(o[4]=l=>t.showSetupModal=!1),class:"btn-close"},"Ã—")]),e("div",Pe,[o[39]||(o[39]=e("p",{class:"text-muted mb-2"},"Automatically create cloud image templates on a Proxmox node.",-1)),e("div",je,[o[35]||(o[35]=e("label",{class:"form-label"},"Select Proxmox Node *",-1)),f(e("select",{"onUpdate:modelValue":o[5]||(o[5]=l=>t.setupForm.selectedNodeId=l),class:"form-control",required:""},[o[34]||(o[34]=e("option",{value:""},"Choose a node...",-1)),(d(!0),n(w,null,k(t.nodes,l=>(d(),n("option",{key:l.id,value:l.id},i(l.node_name)+" ("+i(l.proxmox_host_name)+") ",9,He))),128))],512),[[O,t.setupForm.selectedNodeId]])]),e("div",Ke,[o[36]||(o[36]=e("label",{class:"form-label"},"Select Cloud Images to Setup *",-1)),e("div",Je,[(d(!0),n(w,null,k(t.images,l=>(d(),n("label",{key:l.id,class:"checkbox-item"},[f(e("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":o[6]||(o[6]=g=>t.setupForm.selectedImageIds=g)},null,8,Qe),[[ne,t.setupForm.selectedImageIds]]),e("span",null,i(l.name)+" ("+i(l.os_type)+" "+i(l.version)+")",1)]))),128))]),o[37]||(o[37]=e("p",{class:"text-xs text-muted mt-1"},"Selected images will be created as templates 9000+",-1))]),t.settingUpTemplates?(d(),n("div",We,[...o[38]||(o[38]=[e("p",null,"Setting up templates... This may take several minutes.",-1),e("p",{class:"text-sm"},"Templates are being downloaded and configured in the background.",-1)])])):p("",!0)]),e("div",Xe,[e("button",{onClick:o[7]||(o[7]=l=>t.showSetupModal=!1),class:"btn btn-outline",disabled:t.settingUpTemplates}," Cancel ",8,Ye),e("button",{onClick:o[8]||(o[8]=(...l)=>t.setupTemplates&&t.setupTemplates(...l)),class:"btn btn-primary",disabled:!t.setupForm.selectedNodeId||t.setupForm.selectedImageIds.length===0||t.settingUpTemplates},i(t.settingUpTemplates?"Setting Up...":"Setup Templates"),9,Ze)])])])):p("",!0),t.showAddModal?(d(),n("div",{key:1,class:"modal",onClick:o[28]||(o[28]=l=>t.showAddModal=!1)},[e("div",{class:"modal-content modal-large",onClick:o[27]||(o[27]=D(()=>{},["stop"]))},[e("div",$e,[e("h3",null,i(t.editingImage?"Edit":"Add")+" Cloud Image",1),e("button",{onClick:o[11]||(o[11]=(...l)=>t.closeModal&&t.closeModal(...l)),class:"btn-close"},"Ã—")]),!t.editingImage&&!t.imageSelectionMode?(d(),n("div",eo,[o[42]||(o[42]=e("div",{class:"selection-prompt"},[e("h4",null,"How would you like to add a cloud image?"),e("p",{class:"text-muted"},"Choose from popular distributions or add your own custom image")],-1)),e("div",oo,[e("div",{onClick:o[12]||(o[12]=l=>t.imageSelectionMode="available"),class:"selection-card"},[...o[40]||(o[40]=[e("div",{class:"selection-icon"},"ðŸ“¦",-1),e("div",{class:"selection-info"},[e("h5",null,"Select from Available"),e("p",null,"Choose from 22 cloud-ready images"),e("ul",{class:"selection-list"},[e("li",null,"Ubuntu, Debian, RHEL-based"),e("li",null,"Fedora, SUSE, Arch, Oracle"),e("li",null,"Alpine, Kali, FreeBSD, Gentoo")])],-1),e("div",{class:"selection-arrow"},"â†’",-1)])]),e("div",{onClick:o[13]||(o[13]=l=>t.imageSelectionMode="custom"),class:"selection-card"},[...o[41]||(o[41]=[e("div",{class:"selection-icon"},"âš™ï¸",-1),e("div",{class:"selection-info"},[e("h5",null,"Add Custom Image"),e("p",null,"Enter details for your own cloud image"),e("ul",{class:"selection-list"},[e("li",null,"Custom download URL"),e("li",null,"Any Linux distribution"),e("li",null,"Private or local images")])],-1),e("div",{class:"selection-arrow"},"â†’",-1)])])])])):p("",!0),!t.editingImage&&t.imageSelectionMode==="available"?(d(),n("div",to,[e("div",lo,[e("button",{onClick:o[14]||(o[14]=l=>t.imageSelectionMode=null),class:"btn btn-outline btn-sm"}," â† Back to Selection "),o[43]||(o[43]=e("h4",null,"Select Cloud Images",-1)),t.selectedImageNames.length>0?(d(),n("span",ao,i(t.selectedImageNames.length)+" selected ",1)):p("",!0)]),o[44]||(o[44]=e("p",{class:"text-muted text-sm mb-2"},"Click on images to select multiple. Selected images will be added to your library.",-1)),e("div",so,[(d(!0),n(w,null,k(t.sortedPredefinedImages,l=>(d(),n("div",{key:l.name,onClick:g=>t.toggleImageSelection(l),class:V(["predefined-image-card",{selected:t.isImageSelected(l.name)}])},[e("div",io,i(l.icon),1),e("div",ro,[e("div",co,i(l.name),1),e("div",mo,i(l.os_type)+" "+i(l.version),1)]),t.isImageSelected(l.name)?(d(),n("div",uo,"âœ“")):p("",!0)],10,no))),128))]),t.selectedImageNames.length>0?(d(),n("div",go,[e("h5",null,"Selected Images ("+i(t.selectedImageNames.length)+"):",1),e("div",po,[(d(!0),n(w,null,k(t.selectedImageNames,l=>(d(),n("span",{key:l,class:"selected-image-chip"},i(l),1))),128))])])):p("",!0),e("div",vo,[e("button",{type:"button",onClick:o[15]||(o[15]=(...l)=>t.closeModal&&t.closeModal(...l)),class:"btn btn-outline"},"Cancel"),e("button",{type:"button",onClick:o[16]||(o[16]=(...l)=>t.saveSelectedImages&&t.saveSelectedImages(...l)),disabled:t.selectedImageNames.length===0||t.saving,class:"btn btn-primary"},i(t.saving?"Adding...":`Add ${t.selectedImageNames.length} Image${t.selectedImageNames.length!==1?"s":""}`),9,fo)])])):p("",!0),t.editingImage||t.imageSelectionMode==="custom"?(d(),n("form",{key:2,onSubmit:o[26]||(o[26]=D((...l)=>t.saveImage&&t.saveImage(...l),["prevent"])),class:"modal-body"},[t.editingImage?p("",!0):(d(),n("div",bo,[e("button",{type:"button",onClick:o[17]||(o[17]=l=>t.imageSelectionMode=null),class:"btn btn-outline btn-sm"}," â† Back to Selection "),o[45]||(o[45]=e("h4",null,"Custom Cloud Image Details",-1))])),e("div",ho,[o[46]||(o[46]=e("label",{class:"form-label"},"Display Name *",-1)),f(e("input",{"onUpdate:modelValue":o[18]||(o[18]=l=>t.imageForm.name=l),class:"form-control",required:"",placeholder:"Ubuntu 24.04 LTS Cloud Image"},null,512),[[C,t.imageForm.name]])]),e("div",yo,[o[47]||(o[47]=e("label",{class:"form-label"},"Filename *",-1)),f(e("input",{"onUpdate:modelValue":o[19]||(o[19]=l=>t.imageForm.filename=l),class:"form-control",required:"",placeholder:"ubuntu-24.04-server-cloudimg-amd64.img"},null,512),[[C,t.imageForm.filename]]),o[48]||(o[48]=e("p",{class:"text-xs text-muted mt-1"},"The filename of the cloud image file",-1))]),e("div",_o,[o[49]||(o[49]=e("label",{class:"form-label"},"Download URL *",-1)),f(e("input",{"onUpdate:modelValue":o[20]||(o[20]=l=>t.imageForm.download_url=l),class:"form-control",required:"",type:"url",placeholder:"https://cloud-images.ubuntu.com/..."},null,512),[[C,t.imageForm.download_url]]),o[50]||(o[50]=e("p",{class:"text-xs text-muted mt-1"},"Direct download URL for the cloud image",-1))]),e("div",wo,[e("div",ko,[o[52]||(o[52]=e("label",{class:"form-label"},"OS Type *",-1)),f(e("select",{"onUpdate:modelValue":o[21]||(o[21]=l=>t.imageForm.os_type=l),class:"form-control",required:""},[...o[51]||(o[51]=[de('<option value="" data-v-a2e1157f>Select OS</option><option value="ubuntu" data-v-a2e1157f>Ubuntu</option><option value="debian" data-v-a2e1157f>Debian</option><option value="centos" data-v-a2e1157f>CentOS</option><option value="rocky" data-v-a2e1157f>Rocky Linux</option><option value="alma" data-v-a2e1157f>AlmaLinux</option><option value="fedora" data-v-a2e1157f>Fedora</option><option value="opensuse" data-v-a2e1157f>openSUSE</option><option value="other" data-v-a2e1157f>Other</option>',9)])],512),[[O,t.imageForm.os_type]])]),e("div",xo,[o[53]||(o[53]=e("label",{class:"form-label"},"Version",-1)),f(e("input",{"onUpdate:modelValue":o[22]||(o[22]=l=>t.imageForm.version=l),class:"form-control",placeholder:"24.04"},null,512),[[C,t.imageForm.version]])])]),e("div",Io,[e("div",So,[o[55]||(o[55]=e("label",{class:"form-label"},"Architecture",-1)),f(e("select",{"onUpdate:modelValue":o[23]||(o[23]=l=>t.imageForm.architecture=l),class:"form-control"},[...o[54]||(o[54]=[e("option",{value:"amd64"},"amd64 (x86_64)",-1),e("option",{value:"arm64"},"arm64",-1)])],512),[[O,t.imageForm.architecture]])]),e("div",Co,[o[56]||(o[56]=e("label",{class:"form-label"},"SHA256 Checksum",-1)),f(e("input",{"onUpdate:modelValue":o[24]||(o[24]=l=>t.imageForm.checksum=l),class:"form-control",placeholder:"Optional"},null,512),[[C,t.imageForm.checksum]])])]),e("div",Fo,[e("button",{type:"button",onClick:o[25]||(o[25]=(...l)=>t.closeModal&&t.closeModal(...l)),class:"btn btn-outline"},"Cancel"),e("button",{type:"submit",disabled:t.saving,class:"btn btn-primary"},i(t.saving?"Saving...":t.editingImage?"Update":"Add"),9,Lo)])],32)):p("",!0)])])):p("",!0)])}const Uo=ae(ue,[["render",Ao],["__scopeId","data-v-a2e1157f"]]);export{Uo as default};
